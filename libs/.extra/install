#!/bin/bash
set -e

if [[ -d "${installabs}/include/${current_head}" ]]; then
	(cd headers && .extra/rmdep)
fi

echo "making include directory"
mkdir -p -v "${installabs}/include/${current_head}/.part"
mkdir -p -v "${installabs}/include/${current_head}/.c_extern"
echo "installing header files"
cp --preserve=timestamps -u -t "${installabs}/include/${current_head}" headers/*$H_EXT
cp --preserve=timestamps -u -t "${installabs}/include/${current_head}/.part" headers/.part/*$H_EXT
cp --preserve=timestamps -u -t "${installabs}/include/${current_head}/.c_extern" headers/.c_extern/*.h
